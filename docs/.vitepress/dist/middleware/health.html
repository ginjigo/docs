<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Health Checks | Ginji</title>
    <meta name="description" content="Go Framework for Modern Web Services">
    <meta name="generator" content="VitePress v2.0.0-alpha.15">
    <link rel="preload stylesheet" href="/assets/style.CzPhoNDM.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.CScanhr5.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CQ_ISh4W.js">
    <link rel="modulepreload" href="/assets/chunks/framework.e3UxQEvm.js">
    <link rel="modulepreload" href="/assets/middleware_health.md.BOaOZyyP.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-170c53fe><!--[--><!--]--><!--[--><span tabindex="-1" data-v-451012a8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-451012a8>Skip to content</a><!--]--><!----><header class="VPNav" data-v-170c53fe data-v-21e98c69><div class="VPNavBar" data-v-21e98c69 data-v-edbf9404><div class="wrapper" data-v-edbf9404><div class="container" data-v-edbf9404><div class="title" data-v-edbf9404><div class="VPNavBarTitle has-sidebar" data-v-edbf9404 data-v-16a8c3d8><a class="title" href="/" data-v-16a8c3d8><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-737f6904><!--]--><span data-v-16a8c3d8>Ginji</span><!--[--><!--]--></a></div></div><div class="content" data-v-edbf9404><div class="content-body" data-v-edbf9404><!--[--><!--]--><div class="VPNavBarSearch search" data-v-edbf9404><!--[--><!----><div id="local-search"><button type="button" aria-label="Search" aria-keyshortcuts="/ control+k meta+k" class="DocSearch DocSearch-Button"><span class="DocSearch-Button-Container"><span class="vpi-search DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key"></kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-edbf9404 data-v-138a1628><span id="main-nav-aria-label" class="visually-hidden" data-v-138a1628> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-138a1628 data-v-1494679c><!--[--><span data-v-1494679c>Home</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/getting-started.html" tabindex="0" data-v-138a1628 data-v-1494679c><!--[--><span data-v-1494679c>Guide</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/api/" tabindex="0" data-v-138a1628 data-v-1494679c><!--[--><span data-v-1494679c>API Reference</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/examples/" tabindex="0" data-v-138a1628 data-v-1494679c><!--[--><span data-v-1494679c>Examples</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-edbf9404 data-v-9cde98c8><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-9cde98c8 data-v-c6d441d6 data-v-54855812><span class="check" data-v-54855812><span class="icon" data-v-54855812><!--[--><span class="vpi-sun sun" data-v-c6d441d6></span><span class="vpi-moon moon" data-v-c6d441d6></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-edbf9404 data-v-a0cc7756 data-v-6e5e7bc9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ginjigo/ginji" aria-label="github" target="_blank" rel="me noopener" data-v-6e5e7bc9 data-v-9015c34a><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-edbf9404 data-v-392c0efd data-v-6d4d2382><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6d4d2382><span class="vpi-more-horizontal icon" data-v-6d4d2382></span></button><div class="menu" data-v-6d4d2382><div class="VPMenu" data-v-6d4d2382 data-v-76c0c713><!----><!--[--><!--[--><!----><div class="group" data-v-392c0efd><div class="item appearance" data-v-392c0efd><p class="label" data-v-392c0efd>Appearance</p><div class="appearance-action" data-v-392c0efd><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-392c0efd data-v-c6d441d6 data-v-54855812><span class="check" data-v-54855812><span class="icon" data-v-54855812><!--[--><span class="vpi-sun sun" data-v-c6d441d6></span><span class="vpi-moon moon" data-v-c6d441d6></span><!--]--></span></span></button></div></div></div><div class="group" data-v-392c0efd><div class="item social-links" data-v-392c0efd><div class="VPSocialLinks social-links-list" data-v-392c0efd data-v-6e5e7bc9><!--[--><a class="VPSocialLink no-icon" href="https://github.com/ginjigo/ginji" aria-label="github" target="_blank" rel="me noopener" data-v-6e5e7bc9 data-v-9015c34a><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-edbf9404 data-v-6ffe035d><span class="container" data-v-6ffe035d><span class="top" data-v-6ffe035d></span><span class="middle" data-v-6ffe035d></span><span class="bottom" data-v-6ffe035d></span></span></button></div></div></div></div><div class="divider" data-v-edbf9404><div class="divider-line" data-v-edbf9404></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-170c53fe data-v-1924e3fd><div class="container" data-v-1924e3fd><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-1924e3fd><span class="vpi-align-left menu-icon" data-v-1924e3fd></span><span class="menu-text" data-v-1924e3fd>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-1924e3fd data-v-85ddaa89><button data-v-85ddaa89>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-170c53fe data-v-01266c03><div class="curtain" data-v-01266c03></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-01266c03><span class="visually-hidden" id="sidebar-aria-label" data-v-01266c03> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c8cf511c><section class="VPSidebarItem level-0" data-v-c8cf511c data-v-15093875><div class="item" role="button" tabindex="0" data-v-15093875><div class="indicator" data-v-15093875></div><h2 class="text" data-v-15093875>Introduction</h2><!----></div><div class="items" data-v-15093875><!--[--><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/introduction.html" data-v-15093875><!--[--><p class="text" data-v-15093875>What is Ginji?</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/getting-started.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/quick-start.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Quick Start</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c8cf511c><section class="VPSidebarItem level-0" data-v-c8cf511c data-v-15093875><div class="item" role="button" tabindex="0" data-v-15093875><div class="indicator" data-v-15093875></div><h2 class="text" data-v-15093875>Core Concepts</h2><!----></div><div class="items" data-v-15093875><!--[--><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/routing.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Routing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/context.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Context</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/middleware.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Middleware</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/error-handling.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Error Handling</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/guide/validation.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Validation</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c8cf511c><section class="VPSidebarItem level-0 has-active" data-v-c8cf511c data-v-15093875><div class="item" role="button" tabindex="0" data-v-15093875><div class="indicator" data-v-15093875></div><h2 class="text" data-v-15093875>Middleware</h2><!----></div><div class="items" data-v-15093875><!--[--><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/" data-v-15093875><!--[--><p class="text" data-v-15093875>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/body-limit.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Body Limit</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/security.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Security Headers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/health.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Health Checks</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/rate-limit.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Rate Limiting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/auth.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Authentication</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/middleware/timeout.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Timeout</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c8cf511c><section class="VPSidebarItem level-0" data-v-c8cf511c data-v-15093875><div class="item" role="button" tabindex="0" data-v-15093875><div class="indicator" data-v-15093875></div><h2 class="text" data-v-15093875>Real-Time</h2><!----></div><div class="items" data-v-15093875><!--[--><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/realtime/websocket.html" data-v-15093875><!--[--><p class="text" data-v-15093875>WebSocket</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/realtime/sse.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Server-Sent Events</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/realtime/streaming.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Streaming</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c8cf511c><section class="VPSidebarItem level-0" data-v-c8cf511c data-v-15093875><div class="item" role="button" tabindex="0" data-v-15093875><div class="indicator" data-v-15093875></div><h2 class="text" data-v-15093875>Advanced</h2><!----></div><div class="items" data-v-15093875><!--[--><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/advanced/testing.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Testing</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/advanced/performance.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Performance</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-15093875 data-v-15093875><div class="item" data-v-15093875><div class="indicator" data-v-15093875></div><a class="VPLink link link" href="/advanced/best-practices.html" data-v-15093875><!--[--><p class="text" data-v-15093875>Best Practices</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-170c53fe data-v-f1c8b00b><div class="VPDoc has-sidebar has-aside" data-v-f1c8b00b data-v-9a3aec1d><!--[--><!--]--><div class="container" data-v-9a3aec1d><div class="aside" data-v-9a3aec1d><div class="aside-curtain" data-v-9a3aec1d></div><div class="aside-container" data-v-9a3aec1d><div class="aside-content" data-v-9a3aec1d><div class="VPDocAside" data-v-9a3aec1d data-v-21b7d62c><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-21b7d62c data-v-3dd37849><div class="content" data-v-3dd37849><div class="outline-marker" data-v-3dd37849></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-3dd37849>On this page</div><ul class="VPDocOutlineItem root" data-v-3dd37849 data-v-24ee4c62><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-21b7d62c></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-9a3aec1d><div class="content-container" data-v-9a3aec1d><!--[--><!--]--><main class="main" data-v-9a3aec1d><div style="position:relative;" class="vp-doc _middleware_health" data-v-9a3aec1d><div><h1 id="health-checks" tabindex="-1">Health Checks <a class="header-anchor" href="#health-checks" aria-label="Permalink to “Health Checks”">​</a></h1><p>Kubernetes-style health checks for monitoring and orchestration.</p><h2 id="basic-usage" tabindex="-1">Basic Usage <a class="header-anchor" href="#basic-usage" aria-label="Permalink to “Basic Usage”">​</a></h2><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/ginjigo/ginji/middleware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Health</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><p>This creates two endpoints:</p><ul><li><code>GET /health/live</code> - Liveness probe</li><li><code>GET /health/ready</code> - Readiness probe</li></ul><h2 id="custom-paths" tabindex="-1">Custom Paths <a class="header-anchor" href="#custom-paths" aria-label="Permalink to “Custom Paths”">​</a></h2><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SimpleHealthCheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/live&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span></code></pre></div><h2 id="custom-health-checkers" tabindex="-1">Custom Health Checkers <a class="header-anchor" href="#custom-health-checkers" aria-label="Permalink to “Custom Health Checkers”">​</a></h2><p>Add checks for dependencies:</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DefaultHealthCheckConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add database checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add Redis checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> redis.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Add external API checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    resp, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.example.com/status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp.StatusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;API unhealthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HealthWithConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config))</span></span></code></pre></div><h2 id="configuration" tabindex="-1">Configuration <a class="header-anchor" href="#configuration" aria-label="Permalink to “Configuration”">​</a></h2><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> middleware</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HealthCheckConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    LivenessPath:  </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/health/live&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ReadinessPath: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/health/ready&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Timeout:       </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.Second,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, dbHealthCheck)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HealthWithConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config))</span></span></code></pre></div><h2 id="response-format" tabindex="-1">Response Format <a class="header-anchor" href="#response-format" aria-label="Permalink to “Response Format”">​</a></h2><h3 id="healthy-response-200-ok" tabindex="-1">Healthy Response (200 OK) <a class="header-anchor" href="#healthy-response-200-ok" aria-label="Permalink to “Healthy Response (200 OK)”">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;checks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-12-04T12:30:00Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="unhealthy-response-503-service-unavailable" tabindex="-1">Unhealthy Response (503 Service Unavailable) <a class="header-anchor" href="#unhealthy-response-503-service-unavailable" aria-label="Permalink to “Unhealthy Response (503 Service Unavailable)”">​</a></h3><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOWN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;checks&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DOWN&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UP&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2024-12-04T12:30:00Z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="liveness-vs-readiness" tabindex="-1">Liveness vs Readiness <a class="header-anchor" href="#liveness-vs-readiness" aria-label="Permalink to “Liveness vs Readiness”">​</a></h2><h3 id="liveness-probe" tabindex="-1">Liveness Probe <a class="header-anchor" href="#liveness-probe" aria-label="Permalink to “Liveness Probe”">​</a></h3><ul><li>Checks if application is running</li><li>Kubernetes restarts pod if fails</li><li>Should be simple and fast</li><li>No external dependency checks</li></ul><h3 id="readiness-probe" tabindex="-1">Readiness Probe <a class="header-anchor" href="#readiness-probe" aria-label="Permalink to “Readiness Probe”">​</a></h3><ul><li>Checks if application can serve traffic</li><li>Kubernetes removes from load balancer if fails</li><li>Can include dependency checks</li><li>May fail temporarily during startup</li></ul><h2 id="kubernetes-integration" tabindex="-1">Kubernetes Integration <a class="header-anchor" href="#kubernetes-integration" aria-label="Permalink to “Kubernetes Integration”">​</a></h2><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">apiVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">v1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">kind</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Pod</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">metadata</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myapp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">spec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  containers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myapp</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">myapp:latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">containerPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    livenessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/health/live</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    readinessProbe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      httpGet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/health/ready</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8080</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      initialDelaySeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      periodSeconds</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span></code></pre></div><h2 id="complete-example" tabindex="-1">Complete Example <a class="header-anchor" href="#complete-example" aria-label="Permalink to “Complete Example”">​</a></h2><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">database/sql</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errors</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">time</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/ginjigo/ginji</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">github.com/ginjigo/ginji/middleware</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sql</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> main</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ginji.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Configure health checks</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DefaultHealthCheckConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config.Timeout </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> time.Second</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Database health checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;database&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ctx, cancel </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">WithTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">time.Second)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        defer</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> cancel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> db.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">PingContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ctx)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Redis health checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;redis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> redisClient.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Ping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(context.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Background</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // External API health checker</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddHealthChecker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;payment-api&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">func</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        resp, err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> http.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.stripe.com/healthcheck&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        defer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp.Body.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resp.StatusCode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">New</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;payment API unhealthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> nil</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(middleware.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">HealthWithConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config))</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Your routes</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, home)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;:8080&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to “Best Practices”">​</a></h2><ol><li><strong>Keep liveness simple</strong> - Just check if app is running</li><li><strong>Readiness for dependencies</strong> - Check database, cache, APIs</li><li><strong>Set timeouts</strong> - Don&#39;t let health checks hang</li><li><strong>Fast checks</strong> - Health checks run frequently</li><li><strong>Graceful degradation</strong> - Consider partial health states</li></ol><h2 id="testing-health-checks" tabindex="-1">Testing Health Checks <a class="header-anchor" href="#testing-health-checks" aria-label="Permalink to “Testing Health Checks”">​</a></h2><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check liveness</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/health/live</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check readiness</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://localhost:8080/health/ready</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-9a3aec1d data-v-84b12b97><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-84b12b97><span class="visually-hidden" id="doc-footer-aria-label" data-v-84b12b97>Pager</span><div class="pager" data-v-84b12b97><a class="VPLink link pager-link prev" href="/middleware/security.html" data-v-84b12b97><!--[--><span class="desc" data-v-84b12b97>Previous page</span><span class="title" data-v-84b12b97>Security Headers</span><!--]--></a></div><div class="pager" data-v-84b12b97><a class="VPLink link pager-link next" href="/middleware/rate-limit.html" data-v-84b12b97><!--[--><span class="desc" data-v-84b12b97>Next page</span><span class="title" data-v-84b12b97>Rate Limiting</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-170c53fe data-v-59801706><div class="container" data-v-59801706><p class="message" data-v-59801706>Released under the <a href="https://github.com/ginjigo/ginji/blob/main/LICENSE">MIT License</a>.</p><p class="copyright" data-v-59801706>Copyright © 2025-present <a href="https://github.com/kalanakt">Kalana Kt</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"advanced_best-practices.md\":\"DOHi71nu\",\"advanced_performance.md\":\"Np9gdhKs\",\"advanced_testing.md\":\"DhGB_3FI\",\"api-examples.md\":\"Cl0CAV1T\",\"api_index.md\":\"DpjqCFPv\",\"cli_generate-crud.md\":\"CI3xb5Nu\",\"cli_generate-handler.md\":\"BfdE4yZZ\",\"cli_generate-middleware.md\":\"BTnBOVBQ\",\"cli_index.md\":\"AW_ZrZtF\",\"cli_new.md\":\"Cz-ugHPH\",\"examples_index.md\":\"D_-4BR3L\",\"guide_context.md\":\"C2Eae7P7\",\"guide_error-handling.md\":\"Cn4WevUP\",\"guide_getting-started.md\":\"D3r-R4YN\",\"guide_introduction.md\":\"D-sCkQyY\",\"guide_middleware.md\":\"CPy0NodI\",\"guide_quick-start.md\":\"BqbvkfL0\",\"guide_routing.md\":\"CSfgt0Qo\",\"guide_validation.md\":\"YX5vNKqz\",\"index.md\":\"Cie_j4oB\",\"markdown-examples.md\":\"DRd4S-0N\",\"middleware_auth.md\":\"Bl5CF-CK\",\"middleware_body-limit.md\":\"C2aDZFo_\",\"middleware_health.md\":\"BOaOZyyP\",\"middleware_index.md\":\"DuSKO0cq\",\"middleware_rate-limit.md\":\"DZyVGjBO\",\"middleware_security.md\":\"DHNMEu5k\",\"middleware_timeout.md\":\"BqOc7X4n\",\"realtime_sse.md\":\"DV3Iorjs\",\"realtime_streaming.md\":\"CaeQe-c8\",\"realtime_websocket.md\":\"C6uMnprc\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Ginji\",\"description\":\"Go Framework for Modern Web Services\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"Ginji\",\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"Guide\",\"link\":\"/guide/getting-started\"},{\"text\":\"API Reference\",\"link\":\"/api/\"},{\"text\":\"Examples\",\"link\":\"/examples/\"}],\"sidebar\":[{\"text\":\"Introduction\",\"items\":[{\"text\":\"What is Ginji?\",\"link\":\"/guide/introduction\"},{\"text\":\"Getting Started\",\"link\":\"/guide/getting-started\"},{\"text\":\"Quick Start\",\"link\":\"/guide/quick-start\"}]},{\"text\":\"Core Concepts\",\"items\":[{\"text\":\"Routing\",\"link\":\"/guide/routing\"},{\"text\":\"Context\",\"link\":\"/guide/context\"},{\"text\":\"Middleware\",\"link\":\"/guide/middleware\"},{\"text\":\"Error Handling\",\"link\":\"/guide/error-handling\"},{\"text\":\"Validation\",\"link\":\"/guide/validation\"}]},{\"text\":\"Middleware\",\"items\":[{\"text\":\"Overview\",\"link\":\"/middleware/\"},{\"text\":\"Body Limit\",\"link\":\"/middleware/body-limit\"},{\"text\":\"Security Headers\",\"link\":\"/middleware/security\"},{\"text\":\"Health Checks\",\"link\":\"/middleware/health\"},{\"text\":\"Rate Limiting\",\"link\":\"/middleware/rate-limit\"},{\"text\":\"Authentication\",\"link\":\"/middleware/auth\"},{\"text\":\"Timeout\",\"link\":\"/middleware/timeout\"}]},{\"text\":\"Real-Time\",\"items\":[{\"text\":\"WebSocket\",\"link\":\"/realtime/websocket\"},{\"text\":\"Server-Sent Events\",\"link\":\"/realtime/sse\"},{\"text\":\"Streaming\",\"link\":\"/realtime/streaming\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Testing\",\"link\":\"/advanced/testing\"},{\"text\":\"Performance\",\"link\":\"/advanced/performance\"},{\"text\":\"Best Practices\",\"link\":\"/advanced/best-practices\"}]}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/ginjigo/ginji\"}],\"footer\":{\"message\":\"Released under the <a href=\\\"https://github.com/ginjigo/ginji/blob/main/LICENSE\\\">MIT License</a>.\",\"copyright\":\"Copyright © 2025-present <a href=\\\"https://github.com/kalanakt\\\">Kalana Kt</a>\"},\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false,\"additionalConfig\":{}}");</script>
    
  </body>
</html>